<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>–¢–µ—Å—Ç API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
    .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
    .success { background-color: #d4edda; border-color: #c3e6cb; }
    .error { background-color: #f8d7da; border-color: #f5c6cb; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; }
    pre { background: #f4f4f4; padding: 10px; border-radius: 3px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>üß™ –¢–µ—Å—Ç API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç</h1>
  
  <div class="test-section">
    <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ API</h2>
    <button onclick="testAPI()">–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç</button>
    <div id="api-result"></div>
  </div>

  <div class="test-section">
    <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –∫—É—Ä—Å–æ–≤</h2>
    <div id="rates-result"></div>
  </div>

  <script>
    const APP_ID = "6f5840b11d7243d8a8857734a0245984";

    async function testAPI() {
      const resultDiv = document.getElementById('api-result');
      resultDiv.innerHTML = '<p>‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</p>';

      try {
        const url = `https://openexchangerates.org/api/latest.json?app_id=${APP_ID}`;
        const response = await fetch(url);
        
        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
        
        const data = await response.json();
        const rates = data.rates;

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤–∞–ª—é—Ç
        if (!rates.HUF || !rates.EUR || !rates.RSD) {
          resultDiv.innerHTML = `
            <div class="error">
              <p>‚ùå –û—à–∏–±–∫–∞: –ù–µ –Ω–∞–π–¥–µ–Ω—ã –≤–∞–ª—é—Ç—ã –≤ API</p>
              <p>HUF: ${rates.HUF ? '‚úì' : '‚úó'}</p>
              <p>EUR: ${rates.EUR ? '‚úì' : '‚úó'}</p>
              <p>RSD: ${rates.RSD ? '‚úì' : '‚úó'}</p>
            </div>
          `;
          return;
        }

        // –†–∞—Å—á–µ—Ç –∫—É—Ä—Å–æ–≤
        const rate_hufeur = rates.EUR / rates.HUF;
        const rate_eurrsd = rates.RSD / rates.EUR;

        resultDiv.innerHTML = `
          <div class="success">
            <p>‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!</p>
            <h3>–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç (—á–µ—Ä–µ–∑ USD):</h3>
            <ul>
              <li>USD/HUF: ${rates.HUF.toFixed(4)}</li>
              <li>USD/EUR: ${rates.EUR.toFixed(4)}</li>
              <li>USD/RSD: ${rates.RSD.toFixed(4)}</li>
            </ul>
            <h3>–†–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –∫—É—Ä—Å—ã:</h3>
            <ul>
              <li><strong>HUF ‚Üí EUR:</strong> ${rate_hufeur.toFixed(8)}</li>
              <li><strong>EUR ‚Üí RSD:</strong> ${rate_eurrsd.toFixed(4)}</li>
            </ul>
            <h3>–ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏:</h3>
            <ul>
              <li>1000 HUF = ${(1000 * rate_hufeur).toFixed(2)} EUR</li>
              <li>100 EUR = ${(100 * rate_eurrsd).toFixed(2)} RSD</li>
              <li>1000 HUF = ${(1000 * rate_hufeur * rate_eurrsd).toFixed(2)} RSD</li>
            </ul>
            <pre>${JSON.stringify({ rate_hufeur, rate_eurrsd }, null, 2)}</pre>
          </div>
        `;

        // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ç–æ—Ä–æ–π —Ç–µ—Å—Ç
        document.getElementById('rates-result').innerHTML = `
          <div class="success">
            <p>‚úÖ –ö—É—Ä—Å—ã —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ!</p>
            <p>–≠—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏.</p>
          </div>
        `;

      } catch (error) {
        resultDiv.innerHTML = `
          <div class="error">
            <p>‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ API:</p>
            <pre>${error.message}</pre>
            <p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:</p>
            <ul>
              <li>–ò–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</li>
              <li>–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å APP_ID</li>
              <li>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å API openexchangerates.org</li>
            </ul>
          </div>
        `;
      }
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.addEventListener('load', () => {
      setTimeout(testAPI, 500);
    });
  </script>
</body>
</html>

